---
icon: square-root-variable
---

# Переменные

Переменные позволяют хранить данные во время сессии игрока и использовать их в условиях, стоимости, действиях и плейсхолдерах.

## Область видимости (scope)

* **caster** (по умолчанию) — переменные хранятся у кастера.
* **target:** — переменные хранятся в отдельном контейнере на цели (`target:<name>`).
* **global:** — отдельный namespace у кастера (`global:<name>`).

## Синтаксис

### `var set <name> = <value>`

Устанавливает значение переменной.

```yml
actions:
  - "var set rage = 0"
  - "var set target:marked = true"
```

### `var edit <name> <op> <value>`

Изменяет числовую переменную.

* `name` — имя переменной.
* `op` — операция:
  * `+` — прибавить.
  * `-` — вычесть.
  * `*` — умножить.
  * `/` — разделить.
* `value` — число, которое используется в операции.

```yml
actions:
  - "var edit rage + 10"
```

### `var toggle <name>`

Переключает булеву переменную.

```yml
actions:
  - "var toggle stealth_mode"
```

### `var unset <name>`

Удаляет переменную.

```yml
actions:
  - "var unset rage"
```

### `var <name> <op> <value>`

Условие для проверки переменной.

```yml
conditions:
  - "var rage >= 50"
  - "var target:marked == true"
```

### `var <name> <amount>`

Стоимость (списание) переменной.

```yml
cost:
  - "var souls 5"
```

## Плейсхолдеры и математика

### `{var:name}`

Подставляет значение переменной.

```yml
- "msg &cВаша ярость: {var:rage}"
```

### `{math:expression}`

Вычисляет математическое выражение. Внутри поддерживаются плейсхолдеры `{var:...}`.

```yml
- "dmg {math:10 + {var:rage} / 2}"
- "var set damage_dealt = {math:{var:damage_dealt} + 1}"
```

## Системные плейсхолдеры `{stat:...}`

Плейсхолдеры `{stat:...}` — это значения, которые движок берёт напрямую из текущего состояния игры (игрок, цель, мир).

### Кастер (caster)

- `{stat:caster:health}` — текущее здоровье.
- `{stat:caster:max_health}` — максимальное здоровье.
- `{stat:caster:health_pct}` — здоровье в процентах (0–100).
- `{stat:caster:level}` — уровень игрока.
- `{stat:caster:xp}` — прогресс опыта (0–1).
- `{stat:caster:xp_level}` — уровень опыта.
- `{stat:caster:food}` — голод (0–20).
- `{stat:caster:saturation}` — насыщение.
- `{stat:caster:armor}` — значение брони.
- `{stat:caster:absorption}` — жёлтые сердца.
- `{stat:caster:fire_ticks}` — горение (тики).
- `{stat:caster:fire_seconds}` — горение (секунды).
- `{stat:caster:air}` — оставшийся воздух.
- `{stat:caster:max_air}` — максимальный воздух.
- `{stat:caster:gamemode}` — режим игры.

### Позиция и мир (caster)

- `{stat:caster:world}`
- `{stat:caster:x}`, `{stat:caster:y}`, `{stat:caster:z}`
- `{stat:caster:biome}`
- `{stat:caster:time}` — время мира (0–24000).
- `{stat:caster:is_day}` / `{stat:caster:is_night}` — boolean.

### Эффекты (caster)

Параметризованные ключи (после двоеточия пишется тип эффекта):
- `{stat:caster:has_potion:SPEED}` — есть ли эффект.
- `{stat:caster:potion_level:SPEED}` — уровень эффекта (amp).

### Цель (target)

- `{stat:target:exists}` — есть ли цель.
- `{stat:target:type}` — EntityType.
- `{stat:target:name}` — имя.
- `{stat:target:health}` / `{stat:target:max_health}` / `{stat:target:health_pct}`
- `{stat:target:distance}` — дистанция до кастера.
- `{stat:target:is_player}` / `{stat:target:is_monster}` / `{stat:target:is_boss}`
- `{stat:target:world}`
- `{stat:target:x}`, `{stat:target:y}`, `{stat:target:z}`
- `{stat:target:biome}`

**Примеры:**

```yml
actions:
  - "msg &eHP: &c{stat:caster:health}&7/&c{stat:caster:max_health}"
  - "ab &eЦель: &6{stat:target:name}&7 HP%: &c{stat:target:health_pct}"
  - "msg &eБиом: &a{stat:caster:biome}&7 Время: &a{stat:caster:time}"
```

## См. также

* [Условия](03-Условия.md)
* [Стоимость](04-Стоимость.md)
* [Действия](06-Действия.md)
